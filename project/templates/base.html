{% load static %}<!DOCTYPE html>
<html lang="lt">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="{% static 'css/base.css' %}" />
	<link rel="stylesheet" href="{% static 'css/css-loader.css' %}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/htmx.org@1.7.0"></script> <!-- Htmx -->
    <script defer src="https://unpkg.com/alpinejs@3.10.2/dist/cdn.min.js"></script> <!-- Alpine Core -->
	<script src="https://unpkg.com/sticky-table-headers"></script>
    {% include 'core/includes/form_date_scripts.html' %}
    <script type="text/javascript" src="{% static 'js/dialog.js' %}"></script>

    {% block head %}{% endblock head %}

    <title>Bike statistic</title>
  </head>

  <body>
	  <!-- Loader -->
	<div class="htmx-indicator loader loader-default is-active" id="indicator"></div>

	{% block body %}
	<nav>
		<!-- Data -->
		<div {% if '/' == request.path %}class="active"{% endif %}>
			<a href="{% url 'index' %}">Data</a>
			<div class="dropdown">
				<button class="dropdown__btn"></button>
				<div class="dropdown__menu">
					<a href="{% url 'index' %}">View</a>
					<a class="nav-link" role="button" hx-target="#htmx-container" hx-get="{% url 'data:data_insert' %}" hx-indicator="#indicator">Update</a>
				</div>
			</div>
		</div>

		<!-- Charts and Statistic -->
		<div {% if '/' == request.path %}class="active"{% endif %}>
			<a href="{% url 'reports:chart_overall' %}">Statistic</a>
			<div class="dropdown">
				<button class="dropdown__btn"></button>
				<div class="dropdown__menu">
					<a href="{% url 'reports:chart_overall' %}">Charts</a>
					<a href="{% url 'reports:extremums' %}">Extremums</a>
				</div>
			</div>
		</div>

		<!-- Statistics with Goals -->
		<div {% if '/' == request.path %}class="active"{% endif %}>
			<a href="{% url 'reports:year_progress' years.0 %}">Year progress</a>
			<div class="dropdown">
				<button class="dropdown__btn"></button>
				<div class="dropdown__menu">
					{% for item in years %}
					<a href="{% url 'reports:year_progress' item %}">{{ item }}</a>
					{% endfor %}
				</div>
			</div>
		</div>

		<!-- Component wear -->
		<div {% if '/' == request.path %}class="active"{% endif %}>
			<a href="{% url 'bikes:stats_redirect' default_bike %}">Component wear</a>
			<div class="dropdown">
				<button class="dropdown__btn"></button>
				<div class="dropdown__menu">
					{% for bike in bike_list %}
					<a href="{% url 'bikes:stats_redirect' bike.slug %}"> {{ bike.short_name }}
						{% if bike.main %}<i class="bi bi-star" style="color:rgb(4, 196, 4);"></i>{% endif %}
						{% if bike.retired %}<i class="bi bi-dash-circle" style="color:rgb(230, 1, 1)"></i>{% endif %}
					</a>
					{% endfor %}
				</div>
			</div>
		</div>

		<!-- Settings -->
		<div {% if '/' == request.path %}class="active"{% endif %}>
			<a href="{% url 'bikes:bike_list' %}">Settings</a>
			<div class="dropdown">
				<button class="dropdown__btn"></button>
				<div class="dropdown__menu">
					<a href="{% url 'bikes:bike_list' %}">Bikes</a>
					<a href="{% url 'goals:goal_list' %}">Goals</a>
					<a href="{% url 'bikes:component_list' %}">Components</a>
					<a href="{% url 'users:sync_update' %}">Garmin Profile</a>
				</div>
			</div>
		</div>

		<!-- Profile -->
		<div {% if '/' == request.path %}class="active"{% endif %}>
			<a href="{% url 'users:logout' %}">Profile</a>
			<div class="dropdown">
				<button class="dropdown__btn"></button>
				<div class="dropdown__menu">
					<a href="{% url 'users:logout' %}">Logout</a>
				</div>
			</div>
		</div>

	</nav>


	<!-- Content -->
	<main class="col-lg-11 col-sm-10" id="htmx-container">{% block content %}{% endblock content %}</main>


	<!-- Modal -->
	<div id="modal" class="modal fade">
		<div id="dialog" class="modal-dialog modal-650" hx-target="this" hx-swap="this"></div>
	</div>

	{% endblock body %}
  </body>
</html>
