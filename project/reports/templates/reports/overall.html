{% extends parent_template|default:"reports/index.html" %}
{% load static %}

{% block chart %}
<script src="https://code.highcharts.com/highcharts.src.js"></script>
<!-- <script src="{% static 'js/grid-light.js' %}"></script> -->

{% endblock chart %}

{% block content %}

<div class='row'>
    <div class='col' class="b">
        <div id="my-chart" data-url="{% url 'reports:api-overall' %}" class="r"></div>

        <script>
            $.ajax({
                url: $("#my-chart").attr("data-url"),
                dataType: 'json',
                success: function (data) {
                    console.log(data)
                    Highcharts.chart("my-chart", {
                        chart : { type: 'column'},
                        xAxis: data.first.xAxis,
                        margin: 0,
                        title: {
                            text: ''
                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: 'km, thousants'
                            },
                        },
                        legend: {
                            align: 'right',
                            verticalAlign: 'middle',
                            shadow: false,
                            reversed: true,
                            layout: 'vertical',
                            itemMarginBottom: 10
                        },
                        tooltip: {
                            headerFormat: '<b>{point.x}</b><br/>',
                            pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
                        },
                        plotOptions: {
                            column: {
                                stacking: 'normal',
                            }
                        },
                        series: data.first.series,
                    });
                }
            });
        </script>


    </div>
</div>
{% endblock content %}
