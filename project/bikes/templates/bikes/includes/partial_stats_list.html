{% load buttons %}{% load humanize %}

<div class="row text-white mb-2 mr-0 p-1" style="background-color: #1e4e79">
    <div class="col-1-sm ml-3">{{ component_name }}:</div>
    <div class="col">
        {% for key, value in components_stats.items %}
        <span class="mr-4">{{ key }}: {{ value|floatformat:0|intcomma }} km</span>{% endfor %}
    </div>
    <div class="col text-right">
        Total <b>{{ bike_slug|title }}</b>: {{ total|floatformat:0|intcomma }}km
    </div>
</div>

<table class="table table-striped table-hover table-sm mb-5 tbl-js" id="tbl-0">
    <thead>
        <tr class="thead-light">
            <th width="20%">Start date</th>
            <th width="20%">End date</th>
            <th width="15%">Price</th>
            <th>Brand</th>
            <th class="text-right" width="10%">Actions</th>
            <th width="15%" class="km pr-1 text-right">km</th>
        </tr>
    </thead>
    <tbody>
        {% for item in components_list %}
        {% url 'bikes:stats_update' bike_slug item.pk as url_update %}
        {% url 'bikes:stats_delete' bike_slug item.pk as url_delete %}
        <tr id="row_id_{{ item.pk }}" data-pk="{{ item.pk }}" data-url="{{ url_update }}">
            <td>{{ item.start_date|date:"Y-m-d" }}</td>
            <td>{{ item.end_date|date:"Y-m-d" }}</td>
            <td>{{ item.price|default_if_none:'-' }}</td>
            <td>{{ item.brand }}</td>
            <td class="text-right">
                {% button_edit pk=item.pk url=url_update tbl=component.pk %}
                {% button_delete type='button' pk=item.pk url=url_delete tbl=component.pk %}
            </td>
            <td class="km pr-1 text-right">{{ item.km|floatformat:0|intcomma }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
