{% extends parent_template|default:"bikes/main.html" %}

{% load static %}{% load humanize %}

{% block chart %}
<script src="{% static 'bikes/js/components.js' %}"></script>

{% endblock chart %}

{% block stylesheet %}
<link rel="stylesheet" href="{% static 'css/bikes.css' %}">
{% endblock stylesheet %}

{% block content %}
<p>total: {{ total|floatformat:0|intcomma }}km</p>
{% for component in components %}
   {% with component.components as items  %}
   {% if items %}
   <table class="table table-striped table-hover table-sm mb-5">
       <thead>
           <tr style="background-color: #deebf6"><th colspan="5"><h6>{{ component.name }}</h6></tr>
           <tr class="thead-light">
               <th  width="20%">Start date</th>
               <th  width="20%">End date</th>
               <th  width="15%">km</th>
               <th  width="15%">Price</th>
               <th>Brand</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr id="{{ item.pk }}">
                <td>
                    {{ item.start_date|date:"Y-m-d" }}
                </td>
                <td>
                    {{ item.end_date|date:"Y-m-d" }}
                </td>
                <td>
                    {{ item.km|floatformat:0|intcomma }}
                </td>
                <td>
                    {{ item.price|default_if_none:'#' }}
                </td>
                <td>
                    {{ item.brand }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr class="text-white" style="background-color: #1e4e79">
                <td colspan="5">
                {% for stat in component.stats %}
                    <span class="mr-4">{{ stat.label|title }}: {{ stat.value|floatformat:0|intcomma }}</span>
                {% endfor %}
            </tr>
        </tfoot>
    </table>
    {% endif %}
    {% endwith %}
{% endfor %}

{% endblock content %}
